<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ú® Alegr√≠a: A Magical Invitation ‚ú®</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body>
    <canvas id="starfield"></canvas>
    
    <div class="floating-hearts"></div>
    
    <div class="aurora-container">
        <div class="aurora"></div>
    </div>

    <main class="experience-container">
        <div class="romantic-card active" id="question-card">
            <div class="card-inner">
                <div class="sparkles-overlay"></div>
                <div class="butterflies">
                    <div class="butterfly"></div>
                    <div class="butterfly"></div>
                </div>

                <div class="magic-glow"></div>

                <div class="question-content">
                    <h2 class="romantic-title">Welcoming Innu Innu to Alegr√≠a üé≠‚ú®</h2>
                    
                    <div class="question-carousel">
                        <!-- First Card -->
                        <div class="question active">
                            <p class="question-text">What's your secret power to make hearts race?</p>
                            <div class="options-container">
                                <button class="crystal-option">
                                    <div class="option-shine"></div>
                                    <span class="option-text">That smoldering glance üî•</span>
                                    <div class="option-sparkles"></div>
                                </button>
                                <button class="crystal-option">
                                    <div class="option-shine"></div>
                                    <span class="option-text">Whispered sweet nothings üíã</span>
                                    <div class="option-sparkles"></div>
                                </button>
                                <button class="crystal-option">
                                    <div class="option-shine"></div>
                                    <span class="option-text">Electric touch ‚ö°</span>
                                    <div class="option-sparkles"></div>
                                </button>
                            </div>
                        </div>

                        <!-- Second Card -->
                        <div class="question hidden">
                            <p class="question-text">Which romantic superpower would you wield tonight?</p>
                            <div class="options-container">
                                <button class="crystal-option">
                                    <div class="option-shine"></div>
                                    <span class="option-text">Time-Stopping Kisses üí´</span>
                                    <div class="option-sparkles"></div>
                                </button>
                                <button class="crystal-option">
                                    <div class="option-shine"></div>
                                    <span class="option-text">Heartbeat Synchronization üíû</span>
                                    <div class="option-sparkles"></div>
                                </button>
                                <button class="crystal-option">
                                    <div class="option-shine"></div>
                                    <span class="option-text">Soulful Eye Contact üëÅÔ∏è</span>
                                    <div class="option-sparkles"></div>
                                </button>
                            </div>
                        </div>

                        <!-- Final Card -->
                        <div class="question hidden">
                            <p class="question-text">Ready for our magical collision of hearts?</p>
                            <div class="options-container">
                                <button class="crystal-option final-option">
                                    <div class="option-shine"></div>
                                    <span class="option-text">Claim Our Magical Night üé≠</span>
                                    <div class="option-sparkles"></div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="message-card" id="sweet-message">
            <div class="card-content">
                <div class="premium-border"></div>
                <div class="floating-hearts-bg"></div>
                
                <header class="message-header">
                    <h1 class="sweet-title">You're Invited! üé≠</h1>
                    <p class="sweet-text">To a Magical Evening at Pillai Alegria</p>
                </header>

                <div class="special-message">
                    <div class="alegria-details">
                        <h3 class="event-title">ALEGR√çA</h3>
                        <p class="event-description">Experience two days of wonder and amazement</p>
                        <div class="event-info">
                            <p>üóìÔ∏è 7th & 8th February 2025</p>
                            <p>üìç Pillai Alegria</p>
                            <p>üé≠ A spectacular celebration of artistry</p>
                        </div>
                    </div>
                    <div class="rsvp-section">
                        <p class="rsvp-text">Will you join us in this magical journey?</p>
                        <div class="rsvp-buttons">
                            <button class="rsvp-btn yes-btn">Yes, I'll Be There! ‚ú®</button>
                            <button class="rsvp-btn no-btn">Maybe Next Time üåô</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

<style>
:root {
    --primary: #ff69b4;
    --secondary: #8a4fff;
    --accent: #00fff0;
    --gold: #ffd700;
    --bg-dark: #120a2a;
    --text-light: #ffffff;
    --glass: rgba(255, 255, 255, 0.1);
}

body {
    margin: 0;
    padding: 0;
    min-height: 100vh;
    background: linear-gradient(to bottom, #120a2a, #000);
    font-family: 'Poppins', sans-serif;
    color: var(--text-light);
    overflow: hidden;
}

#starfield {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

.floating-hearts {
    position: fixed;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

.romantic-card {
    position: relative;
    width: 90%;
    max-width: 600px;
    min-height: 500px;
    margin: 2rem auto;
    background: rgba(255, 255, 255, 0.07);
    backdrop-filter: blur(10px);
    border-radius: 30px;
    padding: 2rem;
    box-shadow: 0 0 40px rgba(255, 105, 180, 0.3),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
    transform-style: preserve-3d;
    transform: perspective(1000px);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 2;
}

.butterflies .butterfly {
    position: absolute;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle at center, var(--primary), transparent);
    clip-path: path('M10 0 C15 10 20 0 10 20 C0 0 5 10 10 0');
    animation: flutter 4s infinite ease-in-out;
}

.butterfly:nth-child(2) {
    right: 20%;
    animation-delay: -2s;
}

.crystal-option {
    position: relative;
    width: 100%;
    padding: 1.5rem;
    margin: 1rem 0;
    background: rgba(255, 255, 255, 0.12);
    border: none;
    border-radius: 20px;
    color: var(--text-light);
    font-size: 1.2rem;
    cursor: pointer;
    overflow: hidden;
    transition: all 0.3s;
    transform: translateY(0);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.crystal-option:hover {
    transform: translateY(-3px);
    background: rgba(255, 255, 255, 0.18);
    box-shadow: 0 8px 20px rgba(255, 105, 180, 0.3);
}

.option-shine {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle at center,
        rgba(255, 255, 255, 0.8) 0%,
        rgba(255, 255, 255, 0) 70%);
    opacity: 0;
    transform: rotate(45deg);
    transition: opacity 0.3s;
    pointer-events: none;
}

.crystal-option:hover .option-shine {
    opacity: 0.1;
    animation: shine 1.5s infinite;
}

.romantic-title {
    font-family: 'Dancing Script', cursive;
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 2rem;
    background: linear-gradient(45deg, var(--primary), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.question-text {
    font-size: 1.3rem;
    text-align: center;
    margin-bottom: 2rem;
    line-height: 1.6;
}

.message-card {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.9);
    width: 90%;
    max-width: 500px;
    background: rgba(18, 10, 42, 0.95);
    border-radius: 40px;
    padding: 3rem;
    opacity: 0;
    visibility: hidden;
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 3;
}

.message-card.active {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
    visibility: visible;
}

@keyframes flutter {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(10px, -10px) rotate(10deg); }
    50% { transform: translate(0, -20px) rotate(-5deg); }
    75% { transform: translate(-10px, -10px) rotate(10deg); }
}

@keyframes shine {
    0% { transform: translateX(-100%) rotate(45deg); }
    100% { transform: translateX(100%) rotate(45deg); }
}

.beating-heart {
    width: 50px;
    height: 50px;
    background: var(--primary);
    position: relative;
    transform: rotate(-45deg);
    animation: heartbeat 1.5s ease-in-out infinite;
}

.beating-heart::before,
.beating-heart::after {
    content: '';
    width: 50px;
    height: 50px;
    background: var(--primary);
    border-radius: 50%;
    position: absolute;
}

.beating-heart::before {
    top: -25px;
    left: 0;
}

.beating-heart::after {
    top: 0;
    left: 25px;
}

@keyframes heartbeat {
    0% { transform: rotate(-45deg) scale(1); }
    14% { transform: rotate(-45deg) scale(1.3); }
    28% { transform: rotate(-45deg) scale(1); }
    42% { transform: rotate(-45deg) scale(1.3); }
    70% { transform: rotate(-45deg) scale(1); }
}

.alegria-details {
    text-align: center;
    margin: 2rem 0;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    position: relative;
    overflow: hidden;
}

.event-title {
    font-family: 'Cinzel', serif;
    font-size: 3rem;
    background: linear-gradient(45deg, var(--gold), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
    letter-spacing: 4px;
}

.event-description {
    font-size: 1.2rem;
    color: var(--text-light);
    margin-bottom: 2rem;
}

.event-info {
    display: grid;
    gap: 1rem;
    font-size: 1.1rem;
    color: rgba(255, 255, 255, 0.9);
}

.rsvp-section {
    text-align: center;
    margin-top: 2rem;
}

.rsvp-text {
    font-size: 1.3rem;
    margin-bottom: 1.5rem;
}

.rsvp-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
}

.rsvp-btn {
    padding: 1rem 2rem;
    border: none;
    border-radius: 30px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.yes-btn {
    background: linear-gradient(45deg, var(--primary), var(--secondary));
    color: white;
    box-shadow: 0 5px 15px rgba(255, 105, 180, 0.3);
}

.no-btn {
    background: rgba(255, 255, 255, 0.1);
    color: white;
    backdrop-filter: blur(5px);
}

.rsvp-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(255, 105, 180, 0.4);
}

.premium-border {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border: 2px solid transparent;
    border-radius: 40px;
    background: linear-gradient(45deg, var(--gold), var(--accent)) border-box;
    -webkit-mask:
        linear-gradient(#fff 0 0) padding-box,
        linear-gradient(#fff 0 0);
    -webkit-mask-composite: destination-out;
    mask-composite: exclude;
    animation: borderGlow 3s infinite;
}

@keyframes borderGlow {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

.question {
    transition: all 0.5s ease-out;
    opacity: 1;
}

.question.hidden {
    display: none;
    opacity: 0;
}

.final-option {
    background: linear-gradient(45deg, var(--gold), var(--primary));
    transform: scale(1.05);
}

.final-option:hover {
    transform: scale(1.1);
    box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
}

.crystal-option {
    transform: scale(1);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.crystal-option:hover {
    transform: scale(1.05);
}

.option-sparkles {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
    background-image: 
        radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.3) 1px, transparent 1px),
        radial-gradient(circle at 80% 40%, rgba(255, 255, 255, 0.3) 1px, transparent 1px),
        radial-gradient(circle at 40% 60%, rgba(255, 255, 255, 0.3) 1px, transparent 1px);
    opacity: 0;
    transition: opacity 0.3s;
}

.crystal-option:hover .option-sparkles {
    opacity: 1;
    animation: sparkleFloat 2s infinite linear;
}

@keyframes sparkleFloat {
    0% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
    100% { transform: translateY(0); }
}

.confetti {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, 
        rgba(255, 105, 180, 0.2) 0%,
        rgba(138, 79, 255, 0.2) 30%,
        transparent 70%
    );
    pointer-events: none;
    animation: confettiExplosion 1s ease-out;
}

@keyframes confettiExplosion {
    0% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1.5); }
    100% { opacity: 0; transform: scale(2); }
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
}

.modal-content {
    position: relative;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(18, 10, 42, 0.95);
    padding: 2rem;
    border-radius: 20px;
    width: 90%;
    max-width: 400px;
}

.modal-content input {
    width: 100%;
    padding: 0.8rem;
    margin-bottom: 1rem;
    border-radius: 10px;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
}

.modal-content button {
    width: 100%;
    padding: 1rem;
    border-radius: 10px;
    border: none;
    background: linear-gradient(45deg, #ff69b4, #8a4fff);
    color: #fff;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.special-message {
    max-width: 85%;
    margin: 1.5rem auto;
    padding: 1.5rem;
    transform: scale(0.95);
}

.alegria-details {
    padding: 1rem;
    margin: 0.5rem 0;
}

.event-title {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    margin-bottom: 0.8rem;
}

.event-description {
    font-size: clamp(1rem, 2.5vw, 1.1rem);
    margin-bottom: 1.2rem;
}

.event-info {
    gap: 0.6rem;
    font-size: clamp(0.9rem, 2.5vw, 1rem);
}

.rsvp-section {
    margin-top: 1.2rem;
}

.rsvp-text {
    font-size: clamp(1.1rem, 3vw, 1.3rem);
    margin-bottom: 1.2rem;
}

.rsvp-buttons {
    gap: 0.8rem;
}

.rsvp-btn {
    padding: 0.8rem 1.5rem;
    min-width: 200px;
    font-size: clamp(0.95rem, 2.5vw, 1.1rem);
}

/* Mobile optimization */
@media (max-width: 480px) {
    .special-message {
        max-width: 95%;
        padding: 1rem;
        margin: 1rem auto;
    }
    
    .rsvp-btn {
        width: 100%;
        min-width: auto;
    }
}

/* Tablet adjustments */
@media (min-width: 768px) and (max-width: 1024px) {
    .special-message {
        max-width: 75%;
    }
}
</style>

<script>
// Enhanced Starfield Background
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({
    canvas: document.querySelector('#starfield'),
    alpha: true
});

renderer.setSize(window.innerWidth, window.innerHeight);
camera.position.z = 500;

// Create enhanced star particles
const starsGeometry = new THREE.BufferGeometry();
const starCount = 15000;
const positions = new Float32Array(starCount * 3);
const colors = new Float32Array(starCount * 3);
const sizes = new Float32Array(starCount);

for(let i = 0; i < starCount * 3; i += 3) {
    positions[i] = (Math.random() - 0.5) * 2000;
    positions[i+1] = (Math.random() - 0.5) * 2000;
    positions[i+2] = (Math.random() - 0.5) * 2000;
    
    const color = new THREE.Color();
    color.setHSL(Math.random(), 0.5, 0.7);
    colors[i] = color.r;
    colors[i+1] = color.g;
    colors[i+2] = color.b;
    
    sizes[i/3] = Math.random() * 2;
}

starsGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
starsGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
starsGeometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

const starsMaterial = new THREE.PointsMaterial({
    size: 2,
    vertexColors: true,
    transparent: true,
    opacity: 0.8
});

const starField = new THREE.Points(starsGeometry, starsMaterial);
scene.add(starField);

// Animation loop
function animate() {
    requestAnimationFrame(animate);
    
    starField.rotation.y += 0.0001;
    starField.rotation.x += 0.0001;
    
    renderer.render(scene, camera);
}


animate();

// Floating hearts background
function createHeart() {
    const heart = document.createElement('div');
    heart.className = 'floating-heart';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
    heart.style.opacity = Math.random() * 0.5 + 0.3;
    heart.innerHTML = 'üíñ';
    document.querySelector('.floating-hearts').appendChild(heart);
    
    setTimeout(() => {
        heart.remove();
    }, 5000);
}

setInterval(createHeart, 300);

// Interactive Elements
document.querySelectorAll('.crystal-option').forEach(btn => {
    btn.addEventListener('click', () => {
        const currentQuestion = btn.closest('.question');
        const questions = document.querySelectorAll('.question');
        const currentIndex = Array.from(questions).indexOf(currentQuestion);
        
        // Fade out current question
        currentQuestion.style.opacity = '0';
        
        setTimeout(() => {
            currentQuestion.classList.add('hidden');
            
            // If there's a next question, show it
            if (currentIndex < questions.length - 1) {
                questions[currentIndex + 1].classList.remove('hidden');
                setTimeout(() => {
                    questions[currentIndex + 1].style.opacity = '1';
                }, 100);
            }
            
            // If it's the final option, show the invitation
            if (btn.classList.contains('final-option')) {
                document.querySelector('#question-card').style.opacity = '0';
                setTimeout(() => {
                    document.querySelector('#sweet-message').classList.add('active');
                }, 500);
            }
        }, 500);
    });
});

// Add hover effects
document.querySelectorAll('.crystal-option').forEach(btn => {
    btn.addEventListener('mousemove', (e) => {
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        btn.style.setProperty('--mouse-x', `${x}px`);
        btn.style.setProperty('--mouse-y', `${y}px`);
    });
});

document.addEventListener('DOMContentLoaded', () => {
    const modalHTML = `
    <div id="rsvp-modal" class="modal">
        <div class="modal-content">
            <h3>Quick Details</h3>
            <input type="text" id="guest-name" placeholder="Your Name" required>
            <input type="text" id="guest-contact" placeholder="Contact (Phone/Email)" required>
            <button id="submit-rsvp">Confirm RSVP ‚ú®</button>
        </div>
    </div>`;
    
    document.body.insertAdjacentHTML('beforeend', modalHTML);

    // Get elements
    const yesBtn = document.querySelector('.yes-btn');
    const modal = document.getElementById('rsvp-modal');
    const submitBtn = document.getElementById('submit-rsvp');

    // Show modal on "Yes" click
    yesBtn?.addEventListener('click', () => {
        modal.style.display = 'block';
    });

    // Updated submit handler
    submitBtn?.addEventListener('click', async () => {
        const name = document.getElementById('guest-name').value;
        const contact = document.getElementById('guest-contact').value;
        
        if (!name || !contact) {
            alert('Please fill in both fields ‚ú®');
            return;
        }
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending...';
        
        try {
            const response = await fetch('/api/rsvp', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ name, contact })
            });

            const responseData = await response.json();
            
            if (!response.ok || !responseData.success) {
                throw new Error(responseData.message || 'Failed to send RSVP');
            }

            // Hide modal
            modal.style.display = 'none';
            
            // Show success animation
            const sparkles = document.createElement('div');
            sparkles.className = 'confetti';
            document.body.appendChild(sparkles);
            
            // Show success message with animation
            gsap.to('#sweet-message', {
                duration: 1,
                opacity: 1,
                scale: 1,
                ease: "elastic.out(1, 0.3)"
            });
            
            alert('Thank you for your RSVP! We can\'t wait to see you at Alegr√≠a! üé≠‚ú®');
            
            // Clean up animation
            setTimeout(() => sparkles.remove(), 2000);
            
        } catch (error) {
            console.error('Error:', error);
            alert('Oops! Something went wrong. Please try again! üåü');
        } finally {
            // Reset button state
            submitBtn.disabled = false;
            submitBtn.textContent = 'Confirm RSVP ‚ú®';
        }
    });

    // Close modal when clicking outside
    modal?.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });
});
</script>
</body>
</html>